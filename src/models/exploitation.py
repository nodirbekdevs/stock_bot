from mongoengine import Document, StringField, IntField, DateTimeField, ListField, ReferenceField
from datetime import datetime

from src.models.exploitation_items import MongoExploitationItem


class MongoExploitation(Document):
    admin = IntField(default=0)
    received = IntField(default=0)
    being_given = StringField(max_length=255, default="")
    products = ListField(ReferenceField(MongoExploitationItem), default=[])
    given_at = DateTimeField(default=datetime.utcnow)
    returned_at = DateTimeField(default=datetime.utcnow)
    status = StringField(choices=['process', 'using', 'returned'], default='process')
    created_at = DateTimeField(default=datetime.now)